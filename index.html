Ø£Ù‚ÙˆÙ… Ø¨ÙƒØªØ§Ø¨Ø© Ù…Ù„Ù HTML ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø³Ø¨Ù‚ ÙˆÙ…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ù„Ø¹Ø§Ù… 2026</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <!-- Ù…ÙƒØªØ¨Ø© html2pdf Ù„Ù„ØªØ­ÙˆÙŠÙ„ PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Ù…ÙƒØªØ¨Ø© html2canvas Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ù„ØµÙˆØ±Ø© -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Font Awesome Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
        :root { 
            --primary-color: #2e7d32; 
            --text-color: #333; 
            --error-color: #d32f2f; 
            --disabled-color: #bdbdbd; 
            --shadow: 0 4px 6px rgba(0,0,0,0.1); 
            --radius: 8px; 
        }
        
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        }
        
        body { 
            background-color: #e8f5e9; 
            color: var(--text-color); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            padding: 20px; 
        }
        
        .container { 
            background: white; 
            width: 100%; 
            max-width: 600px; 
            padding: 30px; 
            border-radius: var(--radius); 
            box-shadow: var(--shadow); 
            border-top: 5px solid var(--primary-color); 
        }
        
        header { 
            text-align: center; 
            margin-bottom: 30px; 
        }
        
        h1 { 
            color: var(--primary-color); 
            margin-bottom: 10px; 
            font-size: 24px; 
        }
        
        .form-group { 
            margin-bottom: 20px; 
        }
        
        label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            font-size: 14px; 
        }
        
        input[type="text"], input[type="date"], select { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ddd; 
            border-radius: var(--radius); 
            font-size: 16px; 
        }
        
        input:focus, select:focus { 
            outline: none; 
            border-color: var(--primary-color); 
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1); 
        }
        
        .input-error { 
            border-color: var(--error-color) !important; 
            background-color: #fff8f8; 
            animation: shake 0.4s ease-in-out; 
        }
        
        @keyframes shake { 
            0% { transform: translateX(0); } 
            25% { transform: translateX(-5px); } 
            50% { transform: translateX(5px); } 
            100% { transform: translateX(0); } 
        }
        
        .capacity-display { 
            font-size: 13px; 
            margin-top: 5px; 
            font-weight: bold; 
            color: var(--primary-color); 
            background: #e8f5e9; 
            padding: 8px; 
            border-radius: 4px; 
            display: flex; 
            justify-content: space-between; 
        }
        
        .capacity-display.full { 
            background: #ffebee; 
            color: var(--error-color); 
        }
        
        .btn-submit { 
            width: 100%; 
            padding: 14px; 
            background-color: var(--primary-color); 
            color: white; 
            border: none; 
            border-radius: var(--radius); 
            font-size: 18px; 
            font-weight: bold; 
            cursor: pointer; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 10px; 
        }
        
        .modal-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.5); 
            display: none; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            backdrop-filter: blur(3px); 
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ°ÙƒØ±Ø© */
        .modal-content { 
            background: white; 
            padding: 40px; 
            border-radius: var(--radius); 
            width: 90%; 
            max-width: 500px; 
            text-align: center; 
            color: black;
            border: 2px solid #2e7d32; /* Ø¥Ø·Ø§Ø± Ù…Ù„ÙˆÙ† */
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .modal-icon { 
            width: 80px; 
            height: 80px; 
            background: #e8f5e9; 
            color: var(--primary-color); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 40px; 
            margin: 0 auto 20px; 
            border: 4px solid var(--primary-color); 
        }
        
        .ref-number { 
            font-size: 48px; 
            font-weight: 900; 
            color: #d32f2f; 
            margin: 10px 0 20px 0; 
            display: block; 
            border-bottom: 2px dashed #ccc; 
            padding-bottom: 20px; 
            border-top: 2px dashed #ccc; 
            padding-top: 20px; 
            letter-spacing: 2px; 
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø¨Ø®Ø· ÙƒØ¨ÙŠØ± */
        .booking-details { 
            text-align: right; 
            background: #fff; 
            padding: 0; 
            font-size: 18px; /* Ø®Ø· Ø£ÙƒØ¨Ø± */
            line-height: 1.8;
        }
        
        .booking-details p {
            border-bottom: 1px solid #eee;
            padding: 5px 0;
            color: #444;
        }
        
        .booking-details strong { 
            color: #2e7d32; 
            margin-left: 10px; 
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .modal-actions { 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
            margin-top: 30px; 
            padding-top: 20px; 
            border-top: 1px solid #eee; 
        }
        
        .btn-modal { 
            width: 100%; 
            padding: 15px; 
            border: none; 
            border-radius: var(--radius); 
            font-size: 16px; 
            cursor: pointer; 
            font-weight: bold; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 10px; 
        }
        
        .btn-save-pdf { 
            background-color: #333; 
            color: white; 
        }
        
        .btn-save-image { 
            background-color: var(--primary-color); 
            color: white; 
        }
        
        .btn-close { 
            background-color: #eee; 
            color: #555; 
            font-weight: normal; 
        }
        
        .spinner { 
            border: 3px solid rgba(255,255,255,0.3); 
            border-radius: 50%; 
            border-top: 3px solid white; 
            width: 20px; 
            height: 20px; 
            animation: spin 1s linear infinite; 
            display: none; 
        }
        
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ PDF */
        @media print {
            .modal-actions, .btn-close {
                display: none !important;
            }
        }
        
        .modal-content * {
            max-width: 100% !important;
            page-break-inside: avoid !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø­Ø¨ÙˆØ¨/ ÙØ±Ø¹ Ø§Ù„Ø§Ù†Ø¨Ø§Ø±</h1>
            <h1>Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø³Ø¨Ù‚ ÙˆÙ…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ù„Ø¹Ø§Ù… 2026</h1>   
            <p>ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù‚Ø©</p>
        </header>
        
        <form id="bookingForm" novalidate>
            <div class="form-group">
                <label for="marketingSite">Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ <span style="color:red">*</span></label>
                <select id="marketingSite" required>
                    <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹...</option>
                    <option value="Ø³Ø§ÙŠÙ„Ùˆ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ">Ø³Ø§ÙŠÙ„Ùˆ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ</option>
                    <option value="Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯">Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯</option>
                    <option value="Ù…Ø±ÙƒØ² ØªØ³ÙˆÙ‚ Ø§Ù„Ø®ÙŠØ±Ø§Øª">Ù…Ø±ÙƒØ² ØªØ³ÙˆÙ‚ Ø§Ù„Ø®ÙŠØ±Ø§Øª</option>
                    <option value="Ù…Ø±ÙƒØ² ØªØ³ÙˆÙŠÙ‚ Ø¹Ù†Ù‡">Ù…Ø±ÙƒØ² ØªØ³ÙˆÙŠÙ‚ Ø¹Ù†Ù‡</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ÙˆÙ‚ <span style="color:red">*</span></label>
                <input type="text" id="marketerName" required>
            </div>
            
            <div class="form-group">
                <label>Ø±Ù‚Ù… ÙƒØªØ§Ø¨ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© <span style="color:red">*</span></label>
                <input type="text" id="agricultureBook" required>
            </div>
            
            <div class="form-group">
                <label for="bookDate">ØªØ§Ø±ÙŠØ® Ø§Ù„ÙƒØªØ§Ø¨ <span style="color:red">*</span></label>
                <input type="date" id="bookDate" required>
            </div>
            
            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø© <span style="color:red">*</span></label>
                <input type="text" id="carNumber" required>
            </div>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ø³Ø§Ø¦Ù‚ <span style="color:red">*</span></label>
                <input type="text" id="driverName" required>
            </div>
            
            <div class="form-group">
                <label for="carType">Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø© <span style="color:red">*</span></label>
                <select id="carType" required>
                    <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹...</option>
                    <option value="ØªØ±ÙŠÙ„Ø§">ØªØ±ÙŠÙ„Ø§</option>
                    <option value="ØªØ±ÙŠÙ„Ø§ - Ù‚Ø§Ø·Ø±Ø© ÙˆÙ…Ù‚Ø·ÙˆØ±Ø©">ØªØ±ÙŠÙ„Ø§ - Ù‚Ø§Ø·Ø±Ø© ÙˆÙ…Ù‚Ø·ÙˆØ±Ø©</option>
                    <option value="Ù‚Ù„Ø§Ø¨ Ø³ÙƒØ³">Ù‚Ù„Ø§Ø¨ Ø³ÙƒØ³</option>
                    <option value="Ù‚Ù„Ø§Ø¨ ØªÙƒ">Ù‚Ù„Ø§Ø¨ ØªÙƒ</option>
                    <option value="Ù†Ø³Ø§Ù">Ù†Ø³Ø§Ù</option>
                    <option value="ÙƒÙŠØ§ Ø­Ù…Ù„">ÙƒÙŠØ§ Ø­Ù…Ù„</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="bookingDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø² <span style="color:red">*</span></label>
                <select id="bookingDate" required>
                    <option value="" disabled selected>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®...</option>
                </select>
                <div id="capacityStatus" class="capacity-display" style="display:none;">
                    <span id="statusText">Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª:</span>
                    <span id="countDisplay">0/-</span>
                </div>
            </div>
            
            <button type="submit" class="btn-submit" id="submitBtn">
                <span class="spinner" id="loadingSpinner"></span>
                <span id="btnText">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</span>
            </button>
        </form>
    </div>

    <div class="modal-overlay" id="successModal">
        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„ÙƒØ§Ù…Ù„ (Ø³ÙŠØªÙ… Ø§Ù„ØªÙ‚Ø§Ø·Ù‡ ÙƒØµÙˆØ±Ø© Ùˆ pdf) -->
        <div class="modal-content">
            <div class="modal-icon">âœ“</div>
            <h2 style="color:var(--primary-color); margin-bottom:5px;">ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­</h2>
            
            <!-- Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø² ÙŠØ¸Ù‡Ø± Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø´ÙƒÙ„ Ù…Ù…ÙŠØ² -->
            <label style="font-size:16px; color:#666; font-weight:normal;">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²:</label>
            <span id="refNumberDisplay" class="ref-number">00</span>

            <div class="booking-details" id="bookingDetailsContent">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù‡Ù†Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
            </div>
            
            <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ„ÙƒÙ† Ù„Ù† ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ù„Ù„Ù€ PDF/ØµÙˆØ±Ø© -->
            <div class="modal-actions" id="downloadActions">
                <button class="btn-modal btn-save-image" onclick="saveAsImage()">
                    <i class="fas fa-image"></i> Ø­ÙØ¸ ÙƒØµÙˆØ±Ø©
                </button>
                <button class="btn-modal btn-save-pdf" onclick="saveAsPDF()">
                    <i class="fas fa-file-pdf"></i> Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF
                </button>
                <button class="btn-modal btn-close" onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCRyuJulhSxZo9YAfa6jyDzomewt0W9nzM",
            authDomain: "bookingsys-377c4.firebaseapp.com",
            databaseURL: "https://bookingsys-377c4-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "bookingsys-377c4",
            storageBucket: "bookingsys-377c4.firebasestorage.app",
            messagingSenderId: "214843118228",
            appId: "1:214843118228:web:b342ac832c29d0612f1a81"
        };
        
        const app = firebase.initializeApp(firebaseConfig);
        const db = app.database();
        
        let MAX_BOOKINGS = 100;
        const dateSelect = document.getElementById('bookingDate');
        const siteSelect = document.getElementById('marketingSite');
        let currentBookingData = {};

        document.addEventListener('DOMContentLoaded', async () => {
            await loadSystemConfig();
            await initDates();
            setupEventListeners();
        });

        async function loadSystemConfig() {
            try {
                const limitSnap = await db.ref('config/maxBookings').once('value');
                if (limitSnap.exists()) MAX_BOOKINGS = limitSnap.val();
            } catch (error) {
                console.error('Error loading system config:', error);
            }
        }

        async function initDates() {
            dateSelect.innerHTML = '<option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®...</option>';
            
            try {
                const startSnap = await db.ref('config/startDate').once('value');
                const endSnap = await db.ref('config/endDate').once('value');
                
                const startDateStr = startSnap.exists() ? startSnap.val() : "2026-05-01";
                const endDateStr = endSnap.exists() ? endSnap.val() : "2026-05-31";
                
                const startDate = new Date(startDateStr);
                const endDate = new Date(endDateStr);
                
                let currentDate = startDate;
                while (currentDate <= endDate) {
                    const year = currentDate.getFullYear();
                    const month = String(currentDate.getMonth() + 1).padStart(2, '0');
                    const day = String(currentDate.getDate()).padStart(2, '0');
                    const dateStr = `${year}-${month}-${day}`;
                    
                    const option = document.createElement('option');
                    option.value = dateStr;
                    option.textContent = dateStr;
                    dateSelect.appendChild(option);
                    
                    currentDate.setDate(currentDate.getDate() + 1);
                }
            } catch (error) {
                console.error('Error initializing dates:', error);
                dateSelect.innerHTML = '<option value="" disabled selected>Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®</option>';
            }
        }

        function setupEventListeners() {
            siteSelect.addEventListener('change', updateCapacityUI);
            dateSelect.addEventListener('change', updateCapacityUI);
            
            document.getElementById('bookingForm').addEventListener('submit', handleFormSubmit);
        }

        async function updateCapacityUI() {
            const site = siteSelect.value;
            const date = dateSelect.value;
            const statusDiv = document.getElementById('capacityStatus');
            
            if (!site || !date) {
                statusDiv.style.display = 'none';
                return;
            }
            
            statusDiv.style.display = 'flex';
            document.getElementById('countDisplay').textContent = "...";
            
            try {
                const count = await getCurrentCount(date, site);
                const countDisplay = `${count}/${MAX_BOOKINGS}`;
                document.getElementById('countDisplay').textContent = countDisplay;
                
                if (count >= MAX_BOOKINGS) {
                    statusDiv.className = 'capacity-display full';
                } else {
                    statusDiv.className = 'capacity-display';
                }
            } catch (error) {
                console.error('Error updating capacity UI:', error);
                document.getElementById('countDisplay').textContent = "Ø®Ø·Ø£";
            }
        }

        async function getCurrentCount(date, site) {
            try {
                const snapshot = await db.ref(`counters/${site}/${date}`).once('value');
                return snapshot.val() || 0;
            } catch (error) {
                console.error('Error getting current count:', error);
                return 0;
            }
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const spinner = document.getElementById('loadingSpinner');
            const btnText = document.getElementById('btnText');
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„
            const requiredFields = [
                'marketingSite', 'marketerName', 'agricultureBook', 
                'bookDate', 'carNumber', 'driverName', 'carType', 'bookingDate'
            ];
            
            let isValid = true;
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    field.classList.add('input-error');
                    isValid = false;
                } else {
                    field.classList.remove('input-error');
                }
            });
            
            if (!isValid) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø¹Ø©
            const site = siteSelect.value;
            const date = dateSelect.value;
            const currentCount = await getCurrentCount(date, site);
            
            if (currentCount >= MAX_BOOKINGS) {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹');
                return;
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            submitBtn.disabled = true;
            spinner.style.display = 'inline-block';
            btnText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø¬Ø²...';
            
            try {
                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²
                const bookingId = 'BK' + Date.now() + Math.floor(Math.random() * 1000);
                
                // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø²
                const bookingData = {
                    bookingId: bookingId,
                    site: site,
                    marketerName: document.getElementById('marketerName').value,
                    agricultureBook: document.getElementById('agricultureBook').value,
                    bookDate: document.getElementById('bookDate').value,
                    carNumber: document.getElementById('carNumber').value,
                    driverName: document.getElementById('driverName').value,
                    carType: document.getElementById('carType').value,
                    bookingDate: date,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                };
                
                // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Firebase
                await db.ref(`bookings/${bookingId}`).set(bookingData);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
                const newCount = currentCount + 1;
                await db.ref(`counters/${site}/${date}`).set(newCount);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                currentBookingData = bookingData;
                showSuccessModal(bookingData);
                
            } catch (error) {
                console.error('Error submitting booking:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø². ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            } finally {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ø²Ø±
                submitBtn.disabled = false;
                spinner.style.display = 'none';
                btnText.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²';
            }
        }

        function showSuccessModal(bookingData) {
            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
            document.getElementById('refNumberDisplay').textContent = bookingData.bookingId;
            
            const detailsContent = document.getElementById('bookingDetailsContent');
            detailsContent.innerHTML = `
                <p><strong>Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ³ÙˆÙŠÙ‚:</strong> ${bookingData.site}</p>
                <p><strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ÙˆÙ‚:</strong> ${bookingData.marketerName}</p>
                <p><strong>Ø±Ù‚Ù… ÙƒØªØ§Ø¨ Ø§Ù„Ø²Ø±Ø§Ø¹Ø©:</strong> ${bookingData.agricultureBook}</p>
                <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ÙƒØªØ§Ø¨:</strong> ${bookingData.bookDate}</p>
                <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</strong> ${bookingData.carNumber}</p>
                <p><strong>Ø§Ø³Ù… Ø§Ù„Ø³Ø§Ø¦Ù‚:</strong> ${bookingData.driverName}</p>
                <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</strong> ${bookingData.carType}</p>
                <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²:</strong> ${bookingData.bookingDate}</p>
                <p><strong>ÙˆÙ‚Øª Ø§Ù„Ø­Ø¬Ø²:</strong> ${new Date().toLocaleString('ar-SA')}</p>
            `;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
            document.getElementById('successModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            document.getElementById('bookingForm').reset();
            document.getElementById('capacityStatus').style.display = 'none';
        }

        // ===== Ø¯Ø§Ù„Ø© Ø­ÙØ¸ ÙƒØµÙˆØ±Ø© =====
        function saveAsImage() {
            const element = document.querySelector('.modal-content');
            const buttons = document.getElementById('downloadActions');
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ø¤Ù‚ØªØ§Ù‹
            buttons.style.visibility = 'hidden';
            
            html2canvas(element, {
                scale: 2,
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#ffffff',
                windowWidth: element.scrollWidth,
                windowHeight: element.scrollHeight,
                onclone: function(clonedDoc) {
                    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø³Ø®Ø©
                    const clonedButtons = clonedDoc.getElementById('downloadActions');
                    if (clonedButtons) {
                        clonedButtons.style.display = 'none';
                    }
                }
            }).then(canvas => {
                // ØªØ­ÙˆÙŠÙ„ Canvas Ø¥Ù„Ù‰ ØµÙˆØ±Ø©
                const image = canvas.toDataURL('image/png', 1.0);
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù„Ù„ØªØ­Ù…ÙŠÙ„
                const link = document.createElement('a');
                link.download = `Ø­Ø¬Ø²_${currentBookingData.bookingDate}_${currentBookingData.bookingId}.png`;
                link.href = image;
                link.click();
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                buttons.style.visibility = 'visible';
            }).catch(error => {
                console.error('Error generating image:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©');
                buttons.style.visibility = 'visible';
            });
        }

        // ===== Ø¯Ø§Ù„Ø© Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF (Ø§Ù„Ù…ÙØ­Ø³Ù†Ø©) =====
        function saveAsPDF() {
            const element = document.querySelector('.modal-content');
            const buttons = document.getElementById('downloadActions');
            
            // 1. Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ø¤Ù‚ØªØ§Ù‹ ÙÙŠ Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·
            buttons.style.visibility = 'hidden';
            
            const opt = {
                margin: [10, 10],
                filename: `Ø­Ø¬Ø²_${currentBookingData.bookingDate}_${currentBookingData.bookingId}.pdf`,
                image: { 
                    type: 'jpeg', 
                    quality: 0.98 
                },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    windowWidth: 800,
                    scrollX: 0,
                    scrollY: 0,
                    backgroundColor: '#ffffff',
                    onclone: function(clonedDoc) {
                        // Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø³Ø®Ø© ÙÙ‚Ø· Ù„Ù„ØªØ­ÙˆÙŠÙ„ØŒ Ù„Ø§ ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                        const clonedButtons = clonedDoc.getElementById('downloadActions');
                        if (clonedButtons) {
                            clonedButtons.style.display = 'none';
                        }
                        // ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± ÙƒØ§ÙØ© Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
                        const clonedContent = clonedDoc.querySelector('.modal-content');
                        clonedContent.style.width = '100%';
                        clonedContent.style.maxWidth = '500px';
                        clonedContent.style.overflow = 'visible';
                        
                        // ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                        const details = clonedDoc.querySelector('.booking-details');
                        if (details) {
                            details.style.fontSize = '16px';
                            details.style.lineHeight = '1.6';
                        }
                    }
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait'
                }
            };

            // 3. Ø§Ø³ØªØ®Ø¯Ø§Ù… html2pdf Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
            html2pdf().set(opt).from(element).save()
                .then(() => {
                    console.log('PDF generated successfully');
                })
                .catch((error) => {
                    console.error('PDF generation error:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                })
                .finally(() => {
                    // 4. Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
                    buttons.style.visibility = 'visible';
                });
        }
    </script>
</body>
</html>
```

ğŸ“ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:

1. Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø§Ù‚ØµØ© - ØªÙ…Øª ÙƒØªØ§Ø¨Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„
2. Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© saveAsImage Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙˆØ±Ø©
3. ØªØ­Ø³ÙŠÙ† Ø¯Ø§Ù„Ø© saveAsPDF:
   Â· Ø§Ø³ØªØ®Ø¯Ø§Ù… visibility: 'hidden' Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† display: 'none'
   Â· Ø¥Ø¶Ø§ÙØ© onclone Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø³Ø®Ø© ÙÙ‚Ø·
   Â· Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„
4. Ø¥Ø¶Ø§ÙØ© ØªØ­Ø³ÙŠÙ†Ø§Øª CSS Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„
5. Ø¥ÙƒÙ…Ø§Ù„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase
6. Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© Font Awesome Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
7. ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ ØªØ­Ù…ÙŠÙ„ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡

âš™ï¸ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹:

1. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Firebase Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…ÙØ¹Ù„ ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Firebase
2. Ø§Ø®ØªØ¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø­Ø¬Ø² ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ ÙƒÙ„ Ø´ÙŠØ¡
3. Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ PDFØŒ ØªØ£ÙƒØ¯ Ù…Ù†:
   Â· Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙŠØ¹Ù…Ù„
   Â· Ù…ÙƒØªØ¨Ø§Øª JavaScript Ù…Ø­Ù…Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
   Â· Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¸Ø± Ù„Ù„Ù…Ù„ÙØ§Øª Ø¨ÙˆØ§Ø³Ø·Ø© Ù…Ø§Ù†Ø¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª

Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù† Ø¬Ø§Ù‡Ø² Ù„Ù„Ø±ÙØ¹ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©!